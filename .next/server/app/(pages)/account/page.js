(()=>{var e={};e.id=524,e.ids=[524],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},39142:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>p,pages:()=>d,routeModule:()=>x,tree:()=>u});var t=s(73137),a=s(54647),o=s(4183),n=s.n(o),c=s(71775),i={};for(let e in c)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>c[e]);s.d(r,i);let l=t.AppPageRouteModule,u=["",{children:["(pages)",{children:["account",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,12817)),"C:\\Users\\liamk\\Desktop\\LKY\\WW-Group\\TeamWebsite\\ww-group-real\\src\\app\\(pages)\\account\\page.tsx"]}]},{}]},{"not-found":[()=>Promise.resolve().then(s.bind(s,45653)),"C:\\Users\\liamk\\Desktop\\LKY\\WW-Group\\TeamWebsite\\ww-group-real\\src\\app\\(pages)\\not-found.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,9136)),"C:\\Users\\liamk\\Desktop\\LKY\\WW-Group\\TeamWebsite\\ww-group-real\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,51918,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\liamk\\Desktop\\LKY\\WW-Group\\TeamWebsite\\ww-group-real\\src\\app\\(pages)\\account\\page.tsx"],p="/(pages)/account/page",m={require:s,loadChunk:()=>Promise.resolve()},x=new l({definition:{kind:a.x.APP_PAGE,page:"/(pages)/account/page",pathname:"/account",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},91938:(e,r,s)=>{Promise.resolve().then(s.t.bind(s,41297,23)),Promise.resolve().then(s.t.bind(s,42796,23)),Promise.resolve().then(s.bind(s,39496)),Promise.resolve().then(s.bind(s,33264)),Promise.resolve().then(s.bind(s,71821))},71821:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>m});var t=s(60080),a=s(9885),o=s(66558),n=s(57114),c=s(39496),i=s(92672),l=s(42655),u=s(8693),d=s(99117),p=s.n(d);let m=()=>{let[e,r]=(0,a.useState)(""),[s,d]=(0,a.useState)(""),{user:m,setUser:x}=(0,u.a)(),[h,g]=(0,a.useState)(!1),{register:_,handleSubmit:b,formState:{errors:w,isLoading:f},reset:y,watch:j}=(0,o.cI)(),P=(0,a.useRef)({});P.current=j("password","");let v=(0,n.useRouter)(),C=(0,a.useCallback)(async e=>{if(m){let s=await fetch(`http://localhost:3000/api/users/${m.id}`,{credentials:"include",method:"PATCH",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}});if(s.ok){let e=await s.json();x(e.doc),d("Successfully updated account."),r(""),g(!1),y({email:e.doc.email,name:e.doc.name,password:"",passwordConfirm:""})}else r("There was a problem updating your account.")}},[m,x,y]);return(0,a.useEffect)(()=>{null===m&&v.push(`/login?error=${encodeURIComponent("You must be logged in to view this page.")}&redirect=${encodeURIComponent("/account")}`),m&&y({email:m.email,name:m.name,password:"",passwordConfirm:""})},[m,v,y,h]),(0,t.jsxs)("form",{onSubmit:b(C),className:p().form,children:[(0,t.jsx)(l.v,{error:e,success:s,className:p().message}),h?(0,t.jsxs)(a.Fragment,{children:[(0,t.jsxs)("p",{children:["Change your password below, or ",(0,t.jsx)("button",{type:"button",className:p().changePassword,onClick:()=>g(!h),children:"cancel"}),"."]}),(0,t.jsx)(i.I,{name:"password",type:"password",label:"Password",required:!0,register:_,error:w.password}),(0,t.jsx)(i.I,{name:"passwordConfirm",type:"password",label:"Confirm Password",required:!0,register:_,validate:e=>e===P.current||"The passwords do not match",error:w.passwordConfirm})]}):(0,t.jsxs)(a.Fragment,{children:[(0,t.jsxs)("p",{children:["Change your account details below, or ",(0,t.jsx)("button",{type:"button",className:p().changePassword,onClick:()=>g(!h),children:"click here"})," to change your password."]}),(0,t.jsx)(i.I,{name:"email",label:"Email Address",required:!0,register:_,error:w.email,type:"email"}),(0,t.jsx)(i.I,{name:"name",label:"Name",register:_,error:w.name})]}),(0,t.jsx)(c.Button,{type:"submit",label:f?"Processing":h?"Change Password":"Update Account",disabled:f,appearance:"primary",className:p().submit})]})}},99117:e=>{e.exports={form:"AccountForm_form__lSVWE",changePassword:"AccountForm_changePassword__92rDX",submit:"AccountForm_submit__sVozx"},e.exports.__checksum="c6acafd35efe"},29472:e=>{e.exports={account:"account_account__B33_e",params:"account_params__ICrtr",column:"account_column__JAHeq",comment:"account_comment___3zB2",meta:"account_meta__9IH4q"},e.exports.__checksum="6deb46318c3d"},39593:e=>{e.exports={hr:"HR_hr__KdVl9"},e.exports.__checksum="6f3e37085b8c"},30967:e=>{e.exports={},e.exports.__checksum="73ff4aef96d0"},12817:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>y,metadata:()=>j});var t=s(48144),a=s(53830),o=s(40600),n=s(53205),c=s(39593),i=s.n(c);let l=e=>{let{className:r}=e;return(0,t.jsx)("hr",{className:[r,i().hr].filter(Boolean).join(" ")})};var u=s(97979),d=s(55509),p=s(1978),m=s(62208),x=s(17536);let h=(0,x.createProxy)(String.raw`C:\Users\liamk\Desktop\LKY\WW-Group\TeamWebsite\ww-group-real\src\app\(pages)\account\AccountForm\index.tsx`),{__esModule:g,$$typeof:_}=h,b=h.default;var w=s(29472),f=s.n(w);async function y(){let{user:e}=await (0,p.S)({nullUserRedirect:`/login?error=${encodeURIComponent("You must be logged in to access your account.")}&redirect=${encodeURIComponent("/account")}`});return(0,t.jsxs)(a.Fragment,{children:[(0,t.jsx)(n.T,{children:(0,t.jsx)(u.n,{className:f().params})}),(0,t.jsx)(d.R,{type:"lowImpact",media:null,richText:[{type:"h1",children:[{text:"Account"}]},{type:"paragraph",children:[{text:"This is your account dashboard. Here you can update your account information, view your comment history, and more. To manage all users, "},{type:"link",url:"/admin/collections/users",children:[{text:"login to the admin dashboard."}]}]}]}),(0,t.jsxs)(n.T,{className:f().account,children:[(0,t.jsx)(b,{}),(0,t.jsx)(l,{}),(0,t.jsx)(l,{}),(0,t.jsx)(o.z,{href:"/logout",appearance:"secondary",label:"Log out"})]})]})}let j={title:"Account",description:"Create an account or log in to your existing account.",openGraph:(0,m.T)({title:"Account",url:"/account"})}},55509:(e,r,s)=>{"use strict";s.d(r,{R:()=>l});var t=s(48144);s(53830);var a=s(53205),o=s(40702),n=s(60864),c=s(30967),i=s.n(c);let l=({richText:e})=>(0,t.jsx)(a.T,{className:"",children:(0,t.jsx)("div",{className:"global-margin-x my-12",children:(0,t.jsx)(n.G,{children:(0,t.jsx)(o.Z,{className:i().richText,content:e})})})})}};var r=require("../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[650,560,241,497,859,465,94,752,557,995,371,484,571],()=>s(39142));module.exports=t})();