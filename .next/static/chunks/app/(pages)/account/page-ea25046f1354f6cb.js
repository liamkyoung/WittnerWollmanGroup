(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[524],{8095:function(e,r,t){Promise.resolve().then(t.t.bind(t,4724,23)),Promise.resolve().then(t.t.bind(t,3388,23)),Promise.resolve().then(t.bind(t,4780)),Promise.resolve().then(t.t.bind(t,7580,23)),Promise.resolve().then(t.t.bind(t,5266,23)),Promise.resolve().then(t.t.bind(t,9419,23)),Promise.resolve().then(t.t.bind(t,1649,23)),Promise.resolve().then(t.bind(t,9234)),Promise.resolve().then(t.t.bind(t,5473,19)),Promise.resolve().then(t.t.bind(t,5275,23)),Promise.resolve().then(t.t.bind(t,8301,23)),Promise.resolve().then(t.bind(t,6354)),Promise.resolve().then(t.t.bind(t,1565,23))},3388:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,r){for(var t in r)Object.defineProperty(e,t,{enumerable:!0,get:r[t]})}(r,{suspense:function(){return s},NoSSR:function(){return n}}),t(1024),t(2265);let o=t(4922);function s(){let e=Error(o.NEXT_DYNAMIC_NO_SSR_CODE);throw e.digest=o.NEXT_DYNAMIC_NO_SSR_CODE,e}function n(e){let{children:r}=e;return r}},6354:function(e,r,t){"use strict";t.r(r);var o=t(7437),s=t(2265),n=t(1865),a=t(4033),i=t(4780),l=t(6399),c=t(1752),u=t(7992),d=t(5754),m=t.n(d);r.default=()=>{let[e,r]=(0,s.useState)(""),[t,d]=(0,s.useState)(""),{user:p,setUser:_}=(0,u.a)(),[h,f]=(0,s.useState)(!1),{register:g,handleSubmit:w,formState:{errors:b,isLoading:v},reset:x,watch:y}=(0,n.cI)(),j=(0,s.useRef)({});j.current=y("password","");let k=(0,a.useRouter)(),C=(0,s.useCallback)(async e=>{if(p){let t=await fetch("".concat("http://localhost:3000","/api/users/").concat(p.id),{credentials:"include",method:"PATCH",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}});if(t.ok){let e=await t.json();_(e.doc),d("Successfully updated account."),r(""),f(!1),x({email:e.doc.email,name:e.doc.name,password:"",passwordConfirm:""})}else r("There was a problem updating your account.")}},[p,_,x]);return(0,s.useEffect)(()=>{null===p&&k.push("/login?error=".concat(encodeURIComponent("You must be logged in to view this page."),"&redirect=").concat(encodeURIComponent("/account"))),p&&x({email:p.email,name:p.name,password:"",passwordConfirm:""})},[p,k,x,h]),(0,o.jsxs)("form",{onSubmit:w(C),className:m().form,children:[(0,o.jsx)(c.v,{error:e,success:t,className:m().message}),h?(0,o.jsxs)(s.Fragment,{children:[(0,o.jsxs)("p",{children:["Change your password below, or ",(0,o.jsx)("button",{type:"button",className:m().changePassword,onClick:()=>f(!h),children:"cancel"}),"."]}),(0,o.jsx)(l.I,{name:"password",type:"password",label:"Password",required:!0,register:g,error:b.password}),(0,o.jsx)(l.I,{name:"passwordConfirm",type:"password",label:"Confirm Password",required:!0,register:g,validate:e=>e===j.current||"The passwords do not match",error:b.passwordConfirm})]}):(0,o.jsxs)(s.Fragment,{children:[(0,o.jsxs)("p",{children:["Change your account details below, or ",(0,o.jsx)("button",{type:"button",className:m().changePassword,onClick:()=>f(!h),children:"click here"})," to change your password."]}),(0,o.jsx)(l.I,{name:"email",label:"Email Address",required:!0,register:g,error:b.email,type:"email"}),(0,o.jsx)(l.I,{name:"name",label:"Name",register:g,error:b.name})]}),(0,o.jsx)(i.Button,{type:"submit",label:v?"Processing":h?"Change Password":"Update Account",disabled:v,appearance:"primary",className:m().submit})]})}},4780:function(e,r,t){"use strict";t.r(r),t.d(r,{Button:function(){return a}});var o=t(7437);t(2265);var s=t(1396),n=t.n(s);let a=e=>{let{el:r="link",label:t,newTab:s,href:a,appearance:i,className:l,onClick:c,type:u="button",disabled:d,invert:m}=e,p=r,_=s?{target:"_blank",rel:"noopener noreferrer"}:{},h=[l].filter(Boolean).join(" "),f=(0,o.jsx)("span",{children:t});if((c||"submit"===u)&&(p="button"),"link"===p)return(0,o.jsx)(n(),{href:a||"",className:h,..._,onClick:c,children:f});let g=p;return(0,o.jsx)(g,{href:a,className:h,type:u,..._,onClick:c,disabled:d,children:f})}},6399:function(e,r,t){"use strict";t.d(r,{I:function(){return a}});var o=t(7437);t(2265);var s=t(1577),n=t.n(s);let a=e=>{let{name:r,label:t,required:s,register:a,error:i,type:l="text",validate:c,placeholder:u,disabled:d}=e;return(0,o.jsxs)("div",{className:n().inputWrap,children:[(0,o.jsxs)("label",{htmlFor:"name",className:n().label,children:[t,s?(0,o.jsx)("span",{className:n().asterisk,children:"\xa0*"}):""]}),"textarea"===l?(0,o.jsx)("textarea",{className:[n().input,n().textarea,i&&n().error].filter(Boolean).join(" "),rows:3,placeholder:u,...a(r,{required:s,validate:c}),disabled:d}):(0,o.jsx)("input",{className:[n().input,i&&n().error].filter(Boolean).join(" "),type:l,placeholder:u,...a(r,{required:s,validate:c,..."email"===l?{pattern:{value:/\S+@\S+\.\S+/,message:"Please enter a valid email"}}:{}}),disabled:d}),i&&(0,o.jsx)("div",{className:n().errorMessage,children:(null==i?void 0:i.message)||(null==i?void 0:i.type)!=="required"?null==i?void 0:i.message:"This field is required"})]})}},1752:function(e,r,t){"use strict";t.d(r,{v:function(){return a}});var o=t(7437);t(2265);var s=t(4690),n=t.n(s);let a=e=>{let{message:r,error:t,success:s,warning:a,className:i}=e,l=r||t||s||a;return l?(0,o.jsx)("div",{className:[n().message,i,t&&n().error,s&&n().success,a&&n().warning,!t&&!s&&!a&&n().default].filter(Boolean).join(" "),children:l}):null}},9234:function(e,r,t){"use strict";t.r(r),t.d(r,{RenderParamsComponent:function(){return c}});var o=t(7437),s=t(2265),n=t(4033),a=t(1752),i=t(6506),l=t.n(i);let c=e=>{let{params:r=["error","warning","success","message"],className:t,onParams:i}=e,c=(0,n.useSearchParams)(),u=r.map(e=>null==c?void 0:c.get(e));return((0,s.useEffect)(()=>{u.length&&i&&i(u)},[u,i]),u.length)?(0,o.jsx)("div",{className:t,children:u.map((e,t)=>e?(0,o.jsx)(a.v,{className:l().renderParams,[r[t]]:e},e):null)}):null}},7992:function(e,r,t){"use strict";t.d(r,{H:function(){return a},a:function(){return i}});var o=t(7437),s=t(2265);let n=(0,s.createContext)({}),a=e=>{let{children:r}=e,[t,a]=(0,s.useState)(),[i,l]=(0,s.useState)(),c=(0,s.useCallback)(async e=>{try{let t=await fetch("".concat("http://localhost:3000","/api/users/create"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email,password:e.password,passwordConfirm:e.passwordConfirm})});if(t.ok){var r;let{data:e,errors:o}=await t.json();if(o)throw Error(o[0].message);a(null==e?void 0:null===(r=e.loginUser)||void 0===r?void 0:r.user),l("loggedIn")}else throw Error("Invalid login")}catch(e){throw Error("An error occurred while attempting to login.")}},[]),u=(0,s.useCallback)(async e=>{try{let r=await fetch("".concat("http://localhost:3000","/api/users/login"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email,password:e.password})});if(r.ok){let{user:e,errors:t}=await r.json();if(t)throw Error(t[0].message);return a(e),l("loggedIn"),e}throw Error("Invalid login")}catch(e){throw Error("An error occurred while attempting to login.")}},[]),d=(0,s.useCallback)(async()=>{try{let e=await fetch("".concat("http://localhost:3000","/api/users/logout"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}});if(e.ok)a(null),l("loggedOut");else throw Error("An error occurred while attempting to logout.")}catch(e){throw Error("An error occurred while attempting to logout.")}},[]);(0,s.useEffect)(()=>{let e=async()=>{try{let e=await fetch("".concat("http://localhost:3000","/api/users/me"),{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(e.ok){let{user:r}=await e.json();a(r||null),l(r?"loggedIn":void 0)}else throw Error("An error occurred while fetching your account.")}catch(e){throw a(null),Error("An error occurred while fetching your account.")}};e()},[]);let m=(0,s.useCallback)(async e=>{try{let t=await fetch("".concat("http://localhost:3000","/api/users/forgot-password"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email})});if(t.ok){var r;let{data:e,errors:o}=await t.json();if(o)throw Error(o[0].message);a(null==e?void 0:null===(r=e.loginUser)||void 0===r?void 0:r.user)}else throw Error("Invalid login")}catch(e){throw Error("An error occurred while attempting to login.")}},[]),p=(0,s.useCallback)(async e=>{try{let o=await fetch("".concat("http://localhost:3000","/api/users/reset-password"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e.password,passwordConfirm:e.passwordConfirm,token:e.token})});if(o.ok){var r,t;let{data:e,errors:s}=await o.json();if(s)throw Error(s[0].message);a(null==e?void 0:null===(r=e.loginUser)||void 0===r?void 0:r.user),l((null==e?void 0:null===(t=e.loginUser)||void 0===t?void 0:t.user)?"loggedIn":void 0)}else throw Error("Invalid login")}catch(e){throw Error("An error occurred while attempting to login.")}},[]);return(0,o.jsx)(n.Provider,{value:{user:t,setUser:a,login:u,logout:d,create:c,resetPassword:p,forgotPassword:m,status:i},children:r})},i=()=>(0,s.useContext)(n)},5754:function(e){e.exports={form:"AccountForm_form__lSVWE",changePassword:"AccountForm_changePassword__92rDX",submit:"AccountForm_submit__sVozx"},e.exports.__checksum="7499c6b9d698"},1565:function(e){e.exports={account:"account_account__B33_e",params:"account_params__ICrtr",column:"account_column__JAHeq",comment:"account_comment___3zB2",meta:"account_meta__9IH4q"},e.exports.__checksum="434503f94571"},7580:function(e){e.exports={gutter:"Gutter_gutter__QB0_n",gutterLeft:"Gutter_gutterLeft__9iSai",gutterRight:"Gutter_gutterRight__4jfEx"},e.exports.__checksum="8b7edfbc03b1"},5266:function(e){e.exports={hr:"HR_hr__KdVl9"},e.exports.__checksum="754a23d341d9"},1577:function(e){e.exports={inputWrap:"Input_inputWrap__8dIRM",input:"Input_input__KwwA8",asterisk:"Input_asterisk__YQ6ea",textarea:"Input_textarea__0_uac",error:"Input_error__qB_Bs",label:"Input_label__4aiDX",errorMessage:"Input_errorMessage__9tcd0"},e.exports.__checksum="5d7f608cb559"},9419:function(e){e.exports={label:"Label_label__jIJix"},e.exports.__checksum="3a4a48b27906"},1649:function(e){e.exports={largeBody:"LargeBody_largeBody__4csV5"},e.exports.__checksum="89003fbd68f7"},4690:function(e){e.exports={message:"Message_message__z1tdG",default:"Message_default__RDDb4",warning:"Message_warning__FT9n8",error:"Message_error__WX2fA",success:"Message_success__Cnnxv"},e.exports.__checksum="e7c05ffe3613"},6506:function(e){e.exports={renderParams:"RenderParams_renderParams__vMrJE"},e.exports.__checksum="1f73e3be0e4e"},8301:function(e){e.exports={richText:"RichText_richText__8IUJ0"},e.exports.__checksum="cfae62d1f152"},5275:function(e){e.exports={"top-large":"VerticalPadding_top-large__Fdv3J","top-medium":"VerticalPadding_top-medium__8WZul","bottom-large":"VerticalPadding_bottom-large__W6wnm","bottom-medium":"VerticalPadding_bottom-medium__T9Qsp"},e.exports.__checksum="fd5a6a28f19c"},5473:function(e){e.exports.__checksum="ac2353319419"},622:function(e,r,t){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o=t(2265),s=Symbol.for("react.element"),n=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,i=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,r,t){var o,n={},c=null,u=null;for(o in void 0!==t&&(c=""+t),void 0!==r.key&&(c=""+r.key),void 0!==r.ref&&(u=r.ref),r)a.call(r,o)&&!l.hasOwnProperty(o)&&(n[o]=r[o]);if(e&&e.defaultProps)for(o in r=e.defaultProps)void 0===n[o]&&(n[o]=r[o]);return{$$typeof:s,type:e,key:c,ref:u,props:n,_owner:i.current}}r.Fragment=n,r.jsx=c,r.jsxs=c},7437:function(e,r,t){"use strict";e.exports=t(622)},1396:function(e,r,t){e.exports=t(4724)},4033:function(e,r,t){e.exports=t(290)}},function(e){e.O(0,[724,865,971,864,744],function(){return e(e.s=8095)}),_N_E=e.O()}]);